<?xml version="1.0"?>
<launch>
  <arg name="robot_dof" />
  <arg name="robot_ip" />
  <arg name="report_type" default="normal" />
  <arg name="robot_type" default="xarm" />
  <arg name="xarm_hw_ns" default="xarm" />
  <arg name="velocity_control" default="false"/>
  <arg name="enforce_limits" default="true" />
  <arg name="baud_checkset" default="true" />
  <arg name="default_gripper_baud" default="2000000" />

  <include file="$(eval find('xarm' + str(arg('robot_dof')) + '_gripper_moveit_config') + '/launch/realMove_exec.launch')">
    <arg name="robot_ip" value="$(arg robot_ip)" />
    <arg name="report_type" value="$(arg report_type)" />
    <arg name="show_rviz" value="false"/>
    <arg name="no_gui_plan" value="true"/>
    <arg name="xarm_hw_ns" value="$(arg xarm_hw_ns)"/>
    <arg name="velocity_control" value="$(arg velocity_control)"/>
    <arg name="enforce_limits" value="$(arg enforce_limits)"/>
    <arg name="baud_checkset" value="$(arg baud_checkset)"/>
    <arg name="default_gripper_baud" value="$(arg default_gripper_baud)"/>
    <arg name="jnt_stat_pub_rate" value="100"/>    
  </include>

  <arg name="hw_ns" value="$(eval 'ufactory' if robot_type == 'lite' else 'xarm')" />

  <node name="servo_server" pkg="moveit_servo" type="servo_server" output="screen" >
    <rosparam command="load" file="$(find xarm_moveit_servo)/config/moveit_servo_config.yaml" />
    <param name="move_group_name" type="string" value="$(arg robot_type)$(arg robot_dof)" />
    <param name="command_out_topic" type="string" value="/$(arg hw_ns)/$(arg robot_type)$(arg robot_dof)_traj_controller/command" />
  </node>
    <!-- <include file="$(find xarm_bringup)/launch/xarm$(arg robot_dof)_server.launch" >
    <arg name="robot_ip" value="$(arg robot_ip)" />
  </include>
  <include file="$(find xarm_description)/launch/xarm$(arg robot_dof)_rviz_display.launch" >
    <arg name="limited" value="false" />
    <arg name="add_gripper" value="true" />
    <arg name="joint_state_source" value="[xarm/joint_states]"/>
    <arg name="joint_state_publisher_gui" value="false" />
  </include> -->
      <!-- launch realsense camera -->
  <include file="$(find realsense2_camera)/launch/rs_camera.launch">
    <!-- <arg name="filters" value="pointcloud" /> -->
    <arg name="align_depth" value="true" />
    <!-- <arg name="enable_sync" default="true"/> -->
  </include>


  <!-- <include file="$(find xarm_bringup)/launch/xarm$(arg robot_dof)_server.launch" >
    <arg name="robot_ip" value="$(arg robot_ip)" />
  </include> -->

  <!-- publish extrinsics -->
  <include file="$(find d435i_xarm_setup)/launch/publish_handeye_tf.launch" />

  <!-- publish camera pose
  <node name="publish_transform" pkg="camera_demo" type="publish_transform.py">
  ...
  </node> -->
</launch>
